<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Kinerja HRIS - Firebase</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --orange-primary: #FF6B35;
            --orange-light: #FFE5DC;
            --orange-dark: #E55A2B;
            --black: #1A1A1A;
            --gray-dark: #333333;
            --gray-medium: #666666;
            --gray-light: #F5F5F5;
            --white: #FFFFFF;
            --border: #E0E0E0;
            --shadow: 0 2px 8px rgba(26, 26, 26, 0.1);
            --shadow-hover: 0 4px 16px rgba(26, 26, 26, 0.15);
            --radius: 12px;
            --radius-small: 8px;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; 
            background: var(--gray-light);
            color: var(--black);
            line-height: 1.6;
        }

        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 24px; 
        }

        .card { 
            background: var(--white);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .card-header {
            border-bottom: 1px solid var(--border);
            padding-bottom: 16px;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--black);
            margin: 0;
        }

        .btn { 
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-small);
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }

        .btn-primary { 
            background: var(--orange-primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--orange-dark);
        }

        .btn-secondary { 
            background: var(--white);
            color: var(--gray-dark);
            border: 1px solid var(--border);
        }

        .btn-danger { 
            background: #DC3545;
            color: var(--white);
        }

        .btn-success { 
            background: #28A745;
            color: var(--white);
        }

        .btn-warning {
            background: #FFC107;
            color: var(--black);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        .form-group { 
            margin-bottom: 20px; 
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--gray-dark);
            font-size: 14px;
        }

        .form-control { 
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius-small);
            font-size: 14px;
            background: var(--white);
            transition: border-color 0.2s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--orange-primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .table { 
            width: 100%;
            border-collapse: collapse;
            background: var(--white);
        }
        .table th, .table td { 
            padding: 16px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .table th { 
            background: var(--gray-light);
            font-weight: 600;
            color: var(--gray-dark);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .header { 
            background: var(--white);
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            box-shadow: var(--shadow);
        }

        .header-content { 
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
        }

        .logo { 
            font-size: 24px;
            font-weight: 700;
            color: var(--orange-primary);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
            font-weight: 500;
            color: var(--gray-dark);
        }

        .sidebar { 
            width: 280px;
            background: var(--white);
            min-height: calc(100vh - 80px);
            padding: 24px;
            border-right: 1px solid var(--border);
        }

        .sidebar-nav { 
            list-style: none; 
        }

        .sidebar-nav li { 
            margin-bottom: 4px; 
        }

        .sidebar-nav a { 
            display: block;
            padding: 16px 20px;
            text-decoration: none;
            color: var(--gray-dark);
            border-radius: var(--radius-small);
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .sidebar-nav a:hover {
            background: var(--orange-light);
            color: var(--orange-dark);
        }

        .sidebar-nav a.active { 
            background: var(--orange-primary);
            color: var(--white);
        }

        .main-layout { 
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content { 
            flex: 1;
            padding: 24px;
        }

        .grid { 
            display: grid;
            gap: 24px; 
        }
        .grid-2 { 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
        }
        .grid-3 { 
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
        }

        .stat-card {
            text-align: center;
            padding: 32px 24px;
        }

        .stat-number {
            font-size: 48px;
            font-weight: 700;
            color: var(--orange-primary);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--gray-medium);
            font-weight: 500;
        }

        .progress { 
            width: 100%;
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-bar { 
            height: 100%;
            background: var(--orange-primary);
            transition: width 0.3s ease;
        }

        .modal { 
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 26, 0.6);
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal.show { 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content { 
            background: var(--white);
            padding: 32px;
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow-hover);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--black);
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        .alert { 
            padding: 16px 20px;
            border-radius: var(--radius-small);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .alert-danger { 
            background: #F8D7DA;
            color: #721C24;
            border: 1px solid #F5C6CB;
        }

        .alert-success { 
            background: #D4EDDA;
            color: #155724;
            border: 1px solid #C3E6CB;
        }

        .alert-warning {
            background: #FFF3CD;
            color: #856404;
            border: 1px solid #FFEAA7;
        }

        .status-badge { 
            padding: 6px 12px;
            border-radius: var(--radius-small);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-present { 
            background: #D4EDDA;
            color: #155724;
        }

        .status-absent { 
            background: #F8D7DA;
            color: #721C24;
        }

        .status-leave { 
            background: #FFF3CD;
            color: #856404;
        }

        .status-sick {
            background: #F8D7DA;
            color: #721C24;
        }

        .status-field-work {
            background: #CCE5FF;
            color: #004085;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--black);
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: var(--gray-medium);
            font-size: 16px;
        }

        .kpi-item {
            padding: 20px;
            border: 1px solid var(--border);
            border-radius: var(--radius-small);
            margin-bottom: 16px;
            background: var(--white);
        }

        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .kpi-name {
            font-weight: 600;
            color: var(--black);
        }

        .kpi-target {
            color: var(--gray-medium);
            font-size: 14px;
        }

        .kpi-input-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 12px;
        }

        .kpi-input {
            width: 100px;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius-small);
            text-align: center;
        }

        .kpi-percentage {
            padding: 8px 16px;
            background: var(--orange-light);
            border-radius: var(--radius-small);
            font-weight: 700;
            color: var(--orange-dark);
            min-width: 60px;
            text-align: center;
        }

        .attendance-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .attendance-btn {
            padding: 20px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            background: var(--white);
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .attendance-btn:hover {
            border-color: var(--orange-primary);
            background: var(--orange-light);
        }

        .attendance-btn.success {
            border-color: #28A745;
            color: #28A745;
        }

        .attendance-btn.success:hover {
            background: #D4EDDA;
        }

        .login-container {
            max-width: 400px;
            margin: 80px auto;
            padding: 24px;
        }

        .login-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 48px 32px;
            box-shadow: var(--shadow-hover);
            text-align: center;
        }

        .login-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--black);
            margin-bottom: 32px;
        }

        .task-item {
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius-small);
            margin-bottom: 12px;
            background: var(--white);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .task-title {
            font-weight: 600;
            color: var(--black);
        }

        .task-date {
            font-size: 12px;
            color: var(--gray-medium);
        }

        .task-description {
            color: var(--gray-dark);
            line-height: 1.5;
        }

        .filter-section {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-bottom: 24px;
            padding: 16px;
            background: var(--gray-light);
            border-radius: var(--radius-small);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .filter-group label {
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-dark);
        }

        .filter-group select {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius-small);
            background: var(--white);
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .login-form {
            width: 100%;
        }

        .error-message {
            color: #721C24;
            background: #F8D7DA;
            padding: 8px 12px;
            border-radius: var(--radius-small);
            margin-bottom: 16px;
            font-size: 14px;
        }

        .connection-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: var(--radius-small);
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
        }

        .connection-status.online {
            background: #D4EDDA;
            color: #155724;
        }

        .connection-status.offline {
            background: #F8D7DA;
            color: #721C24;
        }

        .firebase-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .firebase-loading.hide {
            display: none;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--orange-light);
            border-top: 4px solid var(--orange-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 1024px) {
            .grid-3 { 
                grid-template-columns: repeat(2, 1fr); 
            }
        }

        @media (max-width: 768px) {
            .main-layout { 
                flex-direction: column; 
            }
            .sidebar { 
                width: 100%;
                min-height: auto;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
            .sidebar-nav { 
                display: flex;
                overflow-x: auto;
                gap: 8px;
            }
            .sidebar-nav li { 
                min-width: 140px;
                margin-bottom: 0;
            }
            .grid-2, .grid-3 { 
                grid-template-columns: 1fr; 
            }
            .container, .content {
                padding: 16px;
            }
            .stat-number {
                font-size: 36px;
            }
            .attendance-options {
                grid-template-columns: 1fr;
            }
            .kpi-input-group, .filter-section {
                flex-wrap: wrap;
            }
            .action-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                padding: 0 16px;
            }
            .logo {
                font-size: 20px;
            }
            .user-info {
                font-size: 14px;
            }
            .modal-content {
                margin: 16px;
                padding: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading indicator -->
    <div id="firebase-loading" class="firebase-loading">
        <div class="spinner"></div>
    </div>

    <!-- Connection status -->
    <div id="connection-status" class="connection-status offline">
        Menghubungkan ke Firebase...
    </div>

    <div id="app">
        <!-- Login Screen -->
        <div v-if="!currentUser" class="login-container">
            <div class="login-card">
                <h2 class="login-title">Absensi dan KPI Kantor Pusat Ibnu Katsir</h2>
                <div v-if="firebaseError" class="error-message">{{ firebaseError }}</div>
                <div v-if="loginError" class="error-message">{{ loginError }}</div>
                <form @submit.prevent="login" class="login-form">
                    <div class="form-group">
                        <label class="form-label">Nama Pengguna</label>
                        <input v-model="loginForm.username" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kata Sandi</label>
                        <input v-model="loginForm.password" type="password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" :disabled="firebaseLoading">
                        {{ firebaseLoading ? 'Menghubungkan...' : 'Masuk' }}
                    </button>
                </form>
            </div>
        </div>

        <!-- Main Application -->
        <template v-else>
            <header class="header">
                <div class="header-content">
                    <div class="logo">Semoga diberkahi Allah, aamiin.</div>
                    <div class="user-info">
                        <span>{{ currentUser.name }}</span>
                        <button @click="logout" class="btn btn-secondary">Keluar</button>
                    </div>
                </div>
            </header>

            <div class="main-layout">
                <!-- Admin Sidebar -->
                <aside v-if="currentUser.role === 'admin'" class="sidebar">
                    <ul class="sidebar-nav">
                        <li><a href="#" :class="{active: currentView === 'dashboard'}" @click="setView('dashboard')">Dasbor</a></li>
                        <li><a href="#" :class="{active: currentView === 'employees'}" @click="setView('employees')">Karyawan</a></li>
                        <li><a href="#" :class="{active: currentView === 'tasks'}" @click="setView('tasks')">Manajemen KPI</a></li>
                        <li><a href="#" :class="{active: currentView === 'reports'}" @click="setView('reports')">Laporan</a></li>
                        <li><a href="#" :class="{active: currentView === 'employee-details'}" @click="setView('employee-details')">Detail Karyawan</a></li>
                    </ul>
                </aside>

                <main class="content">
                    <!-- Employee Dashboard -->
                    <div v-if="currentUser.role === 'employee'">
                        <div class="page-header">
                            <h1 class="page-title">Dasbor Pegawai</h1>
                            <p class="page-subtitle">Assalamualaikum, {{ currentUser.name }}!</p>
                        </div>
                        
                        <!-- Attendance -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Kehadiran - {{ formatDate(new Date()) }}</h3>
                            </div>
                            <div v-if="todayAttendance">
                                <div class="alert alert-success">
                                    <strong>Kehadiran Tercatat:</strong> {{ getStatusText(todayAttendance.status) }}
                                    <div v-if="todayAttendance.note" style="margin-top: 8px;">
                                        <strong>Catatan:</strong> {{ todayAttendance.note }}
                                    </div>
                                </div>
                            </div>
                            <div v-else>
                                <div class="attendance-options">
                                    <button @click="markAttendance('present')" class="attendance-btn success">
                                        Hadir
                                    </button>
                                    <button @click="showLeaveModal('sick')" class="attendance-btn">
                                        Sakit
                                    </button>
                                    <button @click="showLeaveModal('personal')" class="attendance-btn">
                                        Izin
                                    </button>
                                    <button @click="showLeaveModal('field-work')" class="attendance-btn">
                                        Tugas diluar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- KPIs -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Progres KPI - {{ monthNames[new Date().getMonth()] }} {{ new Date().getFullYear() }}</h3>
                            </div>
                            <div v-for="kpi in myKpis" :key="`kpi-${kpi.id}`" class="kpi-item">
                                <div class="kpi-header">
                                    <div class="kpi-name">{{ kpi.name }}</div>
                                    <div class="kpi-target">Target: {{ kpi.target }}</div>
                                </div>
                                <div style="margin: 8px 0; color: var(--gray-medium);">{{ kpi.description }}</div>
                                <div class="progress">
                                    <div class="progress-bar" :style="{width: Math.min(100, (kpi.current / kpi.target) * 100) + '%'}"></div>
                                </div>
                                <div class="kpi-input-group">
                                    <span>Progres:</span>
                                    <input 
                                        :value="kpi.current" 
                                        @input="updateKpiProgress(kpi, $event)" 
                                        type="number" 
                                        class="kpi-input" 
                                        min="0" 
                                        :max="kpi.target"
                                        step="1"
                                    >
                                    <span>/ {{ kpi.target }}</span>
                                    <div class="kpi-percentage">
                                        {{ Math.round((kpi.current / kpi.target) * 100) }}%
                                    </div>
                                </div>
                            </div>
                            <div v-if="myKpis.length === 0" style="text-align: center; color: var(--gray-medium); padding: 40px;">
                                Belum ada KPI yang ditugaskan
                            </div>
                        </div>

                        <!-- Daily Tasks -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Tugas Harian (Non-KPI)</h3>
                            </div>
                            
                            <!-- Add Task Form -->
                            <div class="form-group">
                                <label class="form-label">Tambah Tugas Hari Ini</label>
                                <textarea 
                                    v-model="newTask.description" 
                                    class="form-control" 
                                    rows="3" 
                                    placeholder="Jelaskan apa yang telah Anda selesaikan hari ini..."
                                ></textarea>
                            </div>
                            <button @click="addDailyTask" class="btn btn-primary" style="margin-bottom: 24px;">
                                Tambah Tugas
                            </button>

                            <!-- Today's Tasks -->
                            <div v-if="todayTasks && todayTasks.length > 0">
                                <h4 style="margin-bottom: 16px;">Tugas Hari Ini:</h4>
                                <div v-for="task in todayTasks" :key="task.id" class="task-item">
                                    <div class="task-header">
                                        <span class="task-date">{{ formatTime(task.timestamp) }}</span>
                                        <button @click="deleteTask(task.id)" class="btn btn-danger btn-small">Hapus</button>
                                    </div>
                                    <div class="task-description">{{ task.description }}</div>
                                </div>
                            </div>
                            <div v-else style="text-align: center; color: var(--gray-medium); padding: 40px;">
                                Belum ada tugas yang ditambahkan hari ini
                            </div>
                        </div>
                    </div>

                    <!-- Admin Views -->
                    <div v-if="currentUser.role === 'admin'">
                        <!-- Dashboard -->
                        <div v-if="currentView === 'dashboard'">
                            <div class="page-header">
                                <h1 class="page-title">Dasbor Admin</h1>
                                <p class="page-subtitle">Bismillah</p>
                            </div>
                            <div class="grid grid-3">
                                <div class="card stat-card">
                                    <div class="stat-number">{{ totalEmployees }}</div>
                                    <div class="stat-label">Total Karyawan</div>
                                </div>
                                <div class="card stat-card">
                                    <div class="stat-number">{{ presentToday }}</div>
                                    <div class="stat-label">Hadir Hari Ini</div>
                                </div>
                                <div class="card stat-card">
                                    <div class="stat-number">{{ totalKpis }}</div>
                                    <div class="stat-label">KPI Aktif</div>
                                </div>
                            </div>
                        </div>

                        <!-- Employees Management -->
                        <div v-if="currentView === 'employees'">
                            <div class="page-header">
                                <h1 class="page-title">Manajemen Karyawan</h1>
                                <p class="page-subtitle">Kelola anggota tim Anda</p>
                            </div>

                            <!-- Add Employee -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">{{ editingEmployee ? 'Edit Karyawan' : 'Tambah Karyawan Baru' }}</h3>
                                </div>
                                <form @submit.prevent="saveEmployee">
                                    <div class="grid grid-2">
                                        <div class="form-group">
                                            <label class="form-label">Nama Lengkap</label>
                                            <input v-model="newEmployee.name" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Nama Pengguna</label>
                                            <input v-model="newEmployee.username" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Kata Sandi</label>
                                            <input v-model="newEmployee.password" type="password" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Posisi</label>
                                            <select v-model="newEmployee.role" class="form-control" required>
                                                <option value="employee">Karyawan</option>
                                                <option value="admin">Admin</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="action-buttons">
                                        <button type="submit" class="btn btn-primary">
                                            {{ editingEmployee ? 'Perbarui Karyawan' : 'Tambah Karyawan' }}
                                        </button>
                                        <button v-if="editingEmployee" @click="cancelEdit" type="button" class="btn btn-secondary">
                                            Batal Edit
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Employee List -->
                            <div class="card" v-if="allUsers && allUsers.length > 0">
                                <div class="card-header">
                                    <h3 class="card-title">Daftar Karyawan</h3>
                                </div>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Nama</th>
                                            <th>Nama Pengguna</th>
                                            <th>Peran</th>
                                            <th>Status Hari Ini</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="emp in allUsers" :key="emp.id">
                                            <td style="font-weight: 600;">{{ emp.name }}</td>
                                            <td>{{ emp.username }}</td>
                                            <td>{{ emp.role === 'admin' ? 'Admin' : 'Karyawan' }}</td>
                                            <td>
                                                <span v-if="emp.role === 'employee'" :class="['status-badge', getAttendanceStatus(emp.id)]">
                                                    {{ getAttendanceStatusText(emp.id) }}
                                                </span>
                                                <span v-else class="status-badge" style="background: #E3F2FD; color: #1976D2;">Admin</span>
                                            </td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button @click="editEmployee(emp)" class="btn btn-warning btn-small">Edit</button>
                                                    <button v-if="emp.id !== currentUser.id" @click="deleteEmployee(emp.id)" class="btn btn-danger btn-small">Hapus</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- KPI Management -->
                        <div v-if="currentView === 'tasks'">
                            <div class="page-header">
                                <h1 class="page-title">Manajemen KPI</h1>
                                <p class="page-subtitle">Buat dan kelola Indikator Kinerja Utama</p>
                            </div>

                            <!-- Add KPI -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Tambah KPI Baru</h3>
                                </div>
                                <form @submit.prevent="addKpi">
                                    <div class="grid grid-2">
                                        <div class="form-group">
                                            <label class="form-label">Nama KPI</label>
                                            <input v-model="newKpi.name" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Target</label>
                                            <input v-model.number="newKpi.target" type="number" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Tugaskan Kepada</label>
                                            <select v-model="newKpi.assignedTo" class="form-control" multiple>
                                                <option v-for="emp in employees" :key="emp.id" :value="emp.id">{{ emp.name }}</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Deskripsi</label>
                                            <input v-model="newKpi.description" type="text" class="form-control">
                                        </div>
                                        <div style="grid-column: span 2;">
                                            <button type="submit" class="btn btn-primary">Tambah KPI</button>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <!-- KPI List -->
                            <div class="card" v-if="allKpis && allKpis.length > 0">
                                <div class="card-header">
                                    <h3 class="card-title">KPI Saat Ini</h3>
                                </div>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Nama KPI</th>
                                            <th>Target</th>
                                            <th>Ditugaskan Kepada</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="kpi in allKpis" :key="kpi.id">
                                            <td style="font-weight: 600;">{{ kpi.name }}</td>
                                            <td>{{ kpi.target }}</td>
                                            <td>{{ getAssignedNames(kpi.assignedTo) }}</td>
                                            <td>
                                                <button @click="deleteKpi(kpi.id)" class="btn btn-danger btn-small">Hapus</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Reports -->
                        <div v-if="currentView === 'reports'">
                            <div class="page-header">
                                <h1 class="page-title">Laporan</h1>
                                <p class="page-subtitle">Laporan kehadiran dan kinerja</p>
                            </div>

                            <!-- Attendance Report -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Laporan Kehadiran</h3>
                                </div>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Karyawan</th>
                                            <th>Status</th>
                                            <th>Tanggal</th>
                                            <th>Waktu</th>
                                            <th>Catatan</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="record in attendanceList" :key="record.id">
                                            <td style="font-weight: 600;">{{ getUserName(record.userId) }}</td>
                                            <td><span :class="['status-badge', getStatusClass(record.status)]">{{ getStatusText(record.status) }}</span></td>
                                            <td>{{ formatDate(new Date(record.timestamp)) }}</td>
                                            <td>{{ formatTime(record.timestamp) }}</td>
                                            <td>{{ record.note || '-' }}</td>
                                        </tr>
                                        <tr v-if="!attendanceList || attendanceList.length === 0">
                                            <td colspan="5" style="text-align: center; color: var(--gray-medium); padding: 40px;">
                                                Tidak ada catatan kehadiran
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Employee Details -->
                        <div v-if="currentView === 'employee-details'">
                            <div class="page-header">
                                <h1 class="page-title">Detail Karyawan</h1>
                                <p class="page-subtitle">Laporan detail untuk setiap karyawan</p>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Pilih Karyawan</h3>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Karyawan</label>
                                    <select v-model="selectedEmployeeId" class="form-control">
                                        <option value="">Pilih Karyawan</option>
                                        <option v-for="emp in employees" :key="emp.id" :value="emp.id">{{ emp.name }}</option>
                                    </select>
                                </div>
                            </div>

                            <template v-if="selectedEmployeeId">
                                <!-- Employee Tasks -->
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">{{ getSelectedEmployeeName() }} - Tugas Harian</h3>
                                    </div>
                                    <div v-if="selectedEmployeeTasks && selectedEmployeeTasks.length > 0">
                                        <div v-for="task in selectedEmployeeTasks" :key="task.id" class="task-item">
                                            <div class="task-header">
                                                <span class="task-date">{{ formatDate(new Date(task.timestamp)) }} - {{ formatTime(task.timestamp) }}</span>
                                            </div>
                                            <div class="task-description">{{ task.description }}</div>
                                        </div>
                                    </div>
                                    <div v-else style="text-align: center; color: var(--gray-medium); padding: 40px;">
                                        Tidak ada tugas harian yang dicatat
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </main>
            </div>
        </template>

        <!-- Leave Request Modal -->
        <div class="modal" :class="{show: showModal}" @click.self="closeModal">
            <div class="modal-content">
                <h3 class="modal-header">{{ getLeaveTitle() }}</h3>
                <form @submit.prevent="submitLeaveRequest">
                    <div class="form-group">
                        <label class="form-label">Alasan / Catatan</label>
                        <textarea v-model="leaveRequest.note" class="form-control" rows="4" required placeholder="Harap berikan detail..."></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" @click="closeModal" class="btn btn-secondary">Batal</button>
                        <button type="submit" class="btn btn-primary">Kirim Permintaan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <script>
        // ===== KONFIGURASI FIREBASE =====
        // GANTI DENGAN DATA DARI FIREBASE CONSOLE ANDA
        const firebaseConfig = {
            apiKey: "AIzaSyA3nXH4vEuKigPZS9ho-nPDWzxfjJkxOJ0",
            authDomain: "absensikantor-4db17.firebaseapp.com",
            databaseURL: "https://absensikantor-4db17-default-rtdb.asia-southeast1.firebasedatabase.app/",
            projectId: "absensikantor-4db17",
            storageBucket: "absensikantor-4db17.firebasestorage.app",
            messagingSenderId: "90749171013",
            appId: "1:90749171013:web:9b143aa2d93f680de1ba2c"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const { createApp, ref, computed, onMounted, reactive, nextTick, watch, onUnmounted } = Vue;

        createApp({
            setup() {
                // ===== STATE =====
                const firebaseLoading = ref(true);
                const firebaseError = ref('');
                const currentUser = ref(null);
                const currentView = ref('dashboard');
                const loginForm = reactive({ username: '', password: '' });
                const loginError = ref('');
                const showModal = ref(false);
                const leaveRequest = reactive({ type: '', note: '' });
                
                // Employee management
                const newEmployee = reactive({ name: '', username: '', password: '', role: 'employee' });
                const editingEmployee = ref(null);
                
                // KPI management
                const newKpi = reactive({ name: '', target: 0, assignedTo: [], description: '' });
                
                // Tasks
                const newTask = reactive({ description: '' });
                
                // Employee details
                const selectedEmployeeId = ref('');
                
                // Firebase data
                const users = ref({});
                const kpis = ref({});
                const attendance = ref({});
                const dailyTasks = ref({});
                const kpiProgress = ref({});
                
                // Month names
                const monthNames = [
                    'Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',
                    'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'
                ];

                // ===== FIREBASE SETUP =====
                onMounted(async () => {
                    try {
                        // Check connection
                        const connectedRef = database.ref('.info/connected');
                        connectedRef.on('value', (snapshot) => {
                            const connected = snapshot.val();
                            const statusEl = document.getElementById('connection-status');
                            if (statusEl) {
                                statusEl.textContent = connected ? 'Online' : 'Offline';
                                statusEl.className = `connection-status ${connected ? 'online' : 'offline'}`;
                            }
                        });

                        // Initialize data if empty
                        const snapshot = await database.ref().once('value');
                        if (!snapshot.exists()) {
                            const initialData = {
                                users: {
                                    1: { id: 1, name: 'Admin User', username: 'admin', password: 'admin123', role: 'admin' },
                                    2: { id: 2, name: 'Syafiq', username: 'Syafiq', password: '1', role: 'employee' }
                                },
                                kpis: {
                                    1: { id: 1, name: 'Target bikin konten nganu', target: 100, assignedTo: [2], description: 'mari' }
                                },
                                attendance: {},
                                dailyTasks: {},
                                kpiProgress: {}
                            };
                            await database.ref().set(initialData);
                        }

                        // Setup listeners
                        database.ref('users').on('value', (snapshot) => {
                            users.value = snapshot.val() || {};
                        });

                        database.ref('kpis').on('value', (snapshot) => {
                            kpis.value = snapshot.val() || {};
                        });

                        database.ref('attendance').on('value', (snapshot) => {
                            attendance.value = snapshot.val() || {};
                        });

                        database.ref('dailyTasks').on('value', (snapshot) => {
                            dailyTasks.value = snapshot.val() || {};
                        });

                        database.ref('kpiProgress').on('value', (snapshot) => {
                            kpiProgress.value = snapshot.val() || {};
                        });

                        // Hide loading
                        setTimeout(() => {
                            firebaseLoading.value = false;
                            document.getElementById('firebase-loading').classList.add('hide');
                        }, 2000);

                    } catch (error) {
                        console.error('Firebase setup error:', error);
                        firebaseError.value = 'Gagal menghubungkan ke Firebase. Periksa konfigurasi.';
                        firebaseLoading.value = false;
                    }
                });

                // ===== COMPUTED PROPERTIES =====
                const allUsers = computed(() => {
                    return Object.values(users.value || {});
                });

                const employees = computed(() => {
                    return allUsers.value.filter(u => u.role === 'employee');
                });

                const allKpis = computed(() => {
                    return Object.values(kpis.value || {});
                });

                const attendanceList = computed(() => {
                    return Object.values(attendance.value || {}).sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                });

                const myKpis = computed(() => {
                    if (!currentUser.value || currentUser.value.role !== 'employee') return [];
                    
                    const currentMonth = new Date().getMonth();
                    const currentYear = new Date().getFullYear();
                    
                    return allKpis.value
                        .filter(kpi => Array.isArray(kpi.assignedTo) && kpi.assignedTo.includes(currentUser.value.id))
                        .map(kpi => {
                            const progressKey = `${currentUser.value.id}-${kpi.id}-${currentMonth}-${currentYear}`;
                            const progress = kpiProgress.value[progressKey];
                            return {
                                ...kpi,
                                current: progress?.current || 0
                            };
                        });
                });

                const todayTasks = computed(() => {
                    if (!currentUser.value) return [];
                    const today = new Date().toDateString();
                    return Object.values(dailyTasks.value || {})
                        .filter(task => 
                            task.userId === currentUser.value.id &&
                            new Date(task.timestamp).toDateString() === today
                        )
                        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                });

                const todayAttendance = computed(() => {
                    if (!currentUser.value) return null;
                    const today = new Date().toDateString();
                    return Object.values(attendance.value || {}).find(a => 
                        a.userId === currentUser.value.id && 
                        new Date(a.timestamp).toDateString() === today
                    );
                });

                const totalEmployees = computed(() => employees.value.length);
                const totalKpis = computed(() => allKpis.value.length);

                const presentToday = computed(() => {
                    const today = new Date().toDateString();
                    return Object.values(attendance.value || {}).filter(a => 
                        new Date(a.timestamp).toDateString() === today && 
                        a.status === 'present'
                    ).length;
                });

                const selectedEmployeeTasks = computed(() => {
                    if (!selectedEmployeeId.value) return [];
                    const empId = parseInt(selectedEmployeeId.value);
                    return Object.values(dailyTasks.value || {})
                        .filter(task => task.userId === empId)
                        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                });

                // ===== METHODS =====
                const login = async () => {
                    try {
                        loginError.value = '';
                        
                        if (!loginForm.username?.trim() || !loginForm.password?.trim()) {
                            loginError.value = 'Harap masukkan nama pengguna dan kata sandi';
                            return;
                        }
                        
                        const usersList = allUsers.value;
                        const user = usersList.find(u => 
                            u.username === loginForm.username.trim() && 
                            u.password === loginForm.password
                        );
                        
                        if (user) {
                            currentUser.value = user;
                            loginError.value = '';
                            Object.assign(loginForm, { username: '', password: '' });
                            console.log('Login berhasil:', user.name);
                        } else {
                            loginError.value = 'Nama pengguna atau kata sandi salah';
                        }
                    } catch (error) {
                        loginError.value = 'Login gagal. Silakan coba lagi.';
                        console.error('Login error:', error);
                    }
                };

                const logout = () => {
                    currentUser.value = null;
                    currentView.value = 'dashboard';
                };

                const setView = (view) => {
                    currentView.value = view;
                };

                const markAttendance = async (status) => {
                    try {
                        if (!currentUser.value) return;
                        
                        const attendanceData = {
                            userId: currentUser.value.id,
                            status: status,
                            note: '',
                            timestamp: new Date().toISOString()
                        };
                        
                        await database.ref('attendance').push(attendanceData);
                        console.log('Kehadiran dicatat:', status);
                    } catch (error) {
                        console.error('Error marking attendance:', error);
                        alert('Gagal mencatat kehadiran. Silakan coba lagi.');
                    }
                };

                const showLeaveModal = (type) => {
                    Object.assign(leaveRequest, { type, note: '' });
                    showModal.value = true;
                };

                const closeModal = () => {
                    showModal.value = false;
                    Object.assign(leaveRequest, { type: '', note: '' });
                };

                const submitLeaveRequest = async () => {
                    try {
                        if (!leaveRequest.note?.trim()) {
                            alert('Harap berikan alasan untuk permintaan cuti Anda');
                            return;
                        }
                        
                        if (!currentUser.value) return;
                        
                        const attendanceData = {
                            userId: currentUser.value.id,
                            status: leaveRequest.type,
                            note: leaveRequest.note.trim(),
                            timestamp: new Date().toISOString()
                        };
                        
                        await database.ref('attendance').push(attendanceData);
                        closeModal();
                        console.log('Permintaan cuti dikirim:', leaveRequest.type);
                    } catch (error) {
                        console.error('Error submitting leave request:', error);
                        alert('Gagal mengirim permintaan cuti. Silakan coba lagi.');
                    }
                };

                const addDailyTask = async () => {
                    try {
                        if (!newTask.description?.trim()) {
                            alert('Harap masukkan deskripsi tugas');
                            return;
                        }
                        
                        if (!currentUser.value) return;

                        const taskData = {
                            userId: currentUser.value.id,
                            description: newTask.description.trim(),
                            timestamp: new Date().toISOString()
                        };
                        
                        await database.ref('dailyTasks').push(taskData);
                        newTask.description = '';
                        console.log('Tugas berhasil ditambahkan');
                    } catch (error) {
                        console.error('Error adding task:', error);
                        alert('Gagal menambah tugas. Silakan coba lagi.');
                    }
                };

                const deleteTask = async (taskId) => {
                    try {
                        if (confirm('Apakah Anda yakin ingin menghapus tugas ini?')) {
                            const taskKey = Object.keys(dailyTasks.value).find(key => 
                                dailyTasks.value[key].timestamp === taskId || 
                                key === taskId ||
                                dailyTasks.value[key].id === taskId
                            );
                            if (taskKey) {
                                await database.ref(`dailyTasks/${taskKey}`).remove();
                                console.log('Tugas dihapus');
                            }
                        }
                    } catch (error) {
                        console.error('Error deleting task:', error);
                        alert('Gagal menghapus tugas. Silakan coba lagi.');
                    }
                };

                const editEmployee = (employee) => {
                    editingEmployee.value = employee;
                    Object.assign(newEmployee, { ...employee });
                };

                const cancelEdit = () => {
                    editingEmployee.value = null;
                    Object.assign(newEmployee, { name: '', username: '', password: '', role: 'employee' });
                };

                const saveEmployee = async () => {
                    try {
                        if (!newEmployee.name?.trim() || !newEmployee.username?.trim() || !newEmployee.password?.trim()) {
                            alert('Harap isi semua field');
                            return;
                        }

                        // Check for duplicate username
                        const existingUser = allUsers.value.find(u => 
                            u.username === newEmployee.username.trim() && 
                            (!editingEmployee.value || u.id !== editingEmployee.value.id)
                        );
                        
                        if (existingUser) {
                            alert('Nama pengguna sudah ada');
                            return;
                        }

                        if (editingEmployee.value) {
                            // Update existing employee
                            await database.ref(`users/${editingEmployee.value.id}`).update(newEmployee);
                            console.log('Karyawan diperbarui:', newEmployee.name);
                        } else {
                            // Add new employee
                            const newId = Date.now();
                            const userData = { ...newEmployee, id: newId };
                            await database.ref(`users/${newId}`).set(userData);
                            console.log('Karyawan ditambahkan:', newEmployee.name);
                        }
                        
                        cancelEdit();
                    } catch (error) {
                        console.error('Error saving employee:', error);
                        alert('Gagal menyimpan karyawan. Silakan coba lagi.');
                    }
                };

                const deleteEmployee = async (employeeId) => {
                    try {
                        if (confirm('Apakah Anda yakin ingin menghapus karyawan ini? Semua data terkait akan dihapus.')) {
                            await database.ref(`users/${employeeId}`).remove();
                            console.log('Karyawan dihapus:', employeeId);
                        }
                    } catch (error) {
                        console.error('Error deleting employee:', error);
                        alert('Gagal menghapus karyawan. Silakan coba lagi.');
                    }
                };

                const updateKpiProgress = async (kpi, event) => {
                    try {
                        if (!currentUser.value) return;
                        
                        const newValue = Number(event.target.value) || 0;
                        const validValue = Math.max(0, Math.min(newValue, kpi.target));
                        
                        const currentMonth = new Date().getMonth();
                        const currentYear = new Date().getFullYear();
                        
                        const progressKey = `${currentUser.value.id}-${kpi.id}-${currentMonth}-${currentYear}`;
                        const progressData = {
                            current: validValue,
                            timestamp: new Date().toISOString()
                        };
                        
                        await database.ref(`kpiProgress/${progressKey}`).set(progressData);
                        console.log(`KPI Diperbarui: ${kpi.name} = ${validValue}/${kpi.target}`);
                    } catch (error) {
                        console.error('Error updating KPI:', error);
                        alert('Gagal memperbarui KPI. Silakan coba lagi.');
                    }
                };

                const addKpi = async () => {
                    try {
                        if (!newKpi.name?.trim() || newKpi.target <= 0 || !Array.isArray(newKpi.assignedTo) || newKpi.assignedTo.length === 0) {
                            alert('Harap isi semua field dengan benar dan tugaskan kepada minimal satu karyawan');
                            return;
                        }
                        
                        const newId = Date.now();
                        const kpiData = { 
                            ...newKpi,
                            id: newId,
                            name: newKpi.name.trim(),
                            description: newKpi.description?.trim() || '',
                            assignedTo: [...newKpi.assignedTo]
                        };
                        
                        await database.ref(`kpis/${newId}`).set(kpiData);
                        Object.assign(newKpi, { name: '', target: 0, assignedTo: [], description: '' });
                        console.log('KPI berhasil ditambahkan');
                    } catch (error) {
                        console.error('Error adding KPI:', error);
                        alert('Gagal menambah KPI. Silakan coba lagi.');
                    }
                };

                const deleteKpi = async (kpiId) => {
                    try {
                        if (confirm('Apakah Anda yakin ingin menghapus KPI ini? Semua data progres akan dihapus.')) {
                            await database.ref(`kpis/${kpiId}`).remove();
                            console.log('KPI dihapus:', kpiId);
                        }
                    } catch (error) {
                        console.error('Error deleting KPI:', error);
                        alert('Gagal menghapus KPI. Silakan coba lagi.');
                    }
                };

                // ===== UTILITY FUNCTIONS =====
                const formatDate = (date) => {
                    try {
                        return date.toLocaleDateString('id-ID', { 
                            weekday: 'short', 
                            year: 'numeric', 
                            month: 'short', 
                            day: 'numeric' 
                        });
                    } catch (error) {
                        return 'Format tanggal error';
                    }
                };

                const formatTime = (timestamp) => {
                    try {
                        return new Date(timestamp).toLocaleTimeString('id-ID', {
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                    } catch (error) {
                        return 'Format waktu error';
                    }
                };

                const getUserName = (userId) => {
                    const user = allUsers.value.find(u => u.id === userId);
                    return user ? user.name : 'Pengguna Tidak Dikenal';
                };

const getAssignedNames = (userIds) => {
                   if (!Array.isArray(userIds)) return 'Data tidak valid';
                   return userIds.map(id => getUserName(id)).join(', ');
               };

               const getAttendanceStatus = (userId) => {
                   try {
                       const today = new Date().toDateString();
                       const record = Object.values(attendance.value || {}).find(a => 
                           a.userId === userId && 
                           new Date(a.timestamp).toDateString() === today
                       );
                       
                       if (!record) return 'status-absent';
                       
                       switch(record.status) {
                           case 'present': return 'status-present';
                           case 'sick': return 'status-sick';
                           case 'personal': return 'status-leave';
                           case 'field-work': return 'status-field-work';
                           default: return 'status-absent';
                       }
                   } catch (error) {
                       return 'status-absent';
                   }
               };

               const getAttendanceStatusText = (userId) => {
                   try {
                       const today = new Date().toDateString();
                       const record = Object.values(attendance.value || {}).find(a => 
                           a.userId === userId && 
                           new Date(a.timestamp).toDateString() === today
                       );
                       
                       if (!record) return 'Belum Dicatat';
                       return getStatusText(record.status);
                   } catch (error) {
                       return 'Error Status';
                   }
               };

               const getStatusClass = (status) => {
                   switch(status) {
                       case 'present': return 'status-present';
                       case 'sick': return 'status-sick';
                       case 'personal': return 'status-leave';
                       case 'field-work': return 'status-field-work';
                       default: return 'status-absent';
                   }
               };

               const getStatusText = (status) => {
                   switch(status) {
                       case 'present': return 'Hadir';
                       case 'sick': return 'Cuti Sakit';
                       case 'personal': return 'Cuti Pribadi';
                       case 'field-work': return 'Kerja Lapangan';
                       default: return 'Belum Dicatat';
                   }
               };

               const getLeaveTitle = () => {
                   switch(leaveRequest.type) {
                       case 'sick': return 'Permintaan Cuti Sakit';
                       case 'personal': return 'Permintaan Cuti Pribadi';
                       case 'field-work': return 'Permintaan Kerja Lapangan';
                       default: return 'Permintaan Cuti';
                   }
               };

               const getSelectedEmployeeName = () => {
                   if (!selectedEmployeeId.value) return '';
                   const emp = employees.value.find(e => e.id === parseInt(selectedEmployeeId.value));
                   return emp ? emp.name : 'Karyawan Tidak Dikenal';
               };

               return {
                   // State
                   firebaseLoading,
                   firebaseError,
                   currentUser,
                   currentView,
                   loginForm,
                   loginError,
                   showModal,
                   leaveRequest,
                   newEmployee,
                   editingEmployee,
                   newKpi,
                   newTask,
                   selectedEmployeeId,
                   monthNames,
                   
                   // Computed
                   allUsers,
                   employees,
                   allKpis,
                   attendanceList,
                   myKpis,
                   todayTasks,
                   todayAttendance,
                   totalEmployees,
                   totalKpis,
                   presentToday,
                   selectedEmployeeTasks,
                   
                   // Methods
                   login,
                   logout,
                   setView,
                   markAttendance,
                   showLeaveModal,
                   closeModal,
                   submitLeaveRequest,
                   addDailyTask,
                   deleteTask,
                   editEmployee,
                   cancelEdit,
                   saveEmployee,
                   deleteEmployee,
                   updateKpiProgress,
                   addKpi,
                   deleteKpi,
                   formatDate,
                   formatTime,
                   getUserName,
                   getAssignedNames,
                   getAttendanceStatus,
                   getAttendanceStatusText,
                   getStatusClass,
                   getStatusText,
                   getLeaveTitle,
                   getSelectedEmployeeName
               };
           }
       }).mount('#app');
   </script>
</body>
</html>
